<!DOCTYPE html>
<html lang="en">
  <%- include('../layouts/head')%>
  <body>
    <%- include('../layouts/navigation')%>
    <main>
      <% if(errorMessage && errorMessage.length > 0) { %>
      <div class="toast-container">
        <div class="toast toast-error">
          <div><%= errorMessage %></div>
          <img
            class="toast-cross-icon"
            src="/img/cross-icon-error.svg"
            onclick="closeToast(event)"
          />
        </div>
        <div class="toast-duration error"></div>
      </div>
      <% } %>
      <form
        class="product-form"
        action="/add-product"
        method="POST"
        enctype="multipart/form-data"
      >
        <div class="form-control">
          <label for="title">Title</label>
          <input
            class="<%= validationErrors.includes('title') ? 'invalid': '' %>"
            type="text"
            name="title"
            id="title"
            value="<% if (hasError) { %><%= product.title %><% } %>"
          />
          <% if(validationErrors.includes('title')) { %>
          <p class="error-msg">Title field is required.</p>
          <% } %>
        </div>
        <div class="form-control">
          <label for="image">Image</label>
          <input type="file" name="image" id="image" />
        </div>
        <div class="form-control">
          <label for="price">Price</label>
          <input
            class="<%= validationErrors.includes('price') ? 'invalid': '' %>"
            type="number"
            name="price"
            id="price"
            step="0.01"
            value="<% if (hasError) { %><%= product.price %><% } %>"
          />
          <% if(validationErrors.includes('price')) { %>
          <p class="error-msg">Price field is required.</p>
          <% } %>
        </div>
        <div class="form-control">
          <label for="description">Description</label>
          <input
            class="<%= validationErrors.includes('description') ? 'invalid': '' %>"
            type="text"
            name="description"
            id="description"
            value="<% if (hasError) { %><%= product.description %><% } %>"
          />
          <% if(validationErrors.includes('description')) { %>
          <p class="error-msg">Description field is required.</p>
          <% } %>
        </div>
        <input type="hidden" name="_csrf" value="<%= csrfToken %>" />
        <button class="btn" type="submit">Add Product</button>
      </form>
    </main>
    <%- include('../layouts/footer')%>
  </body>
</html>
